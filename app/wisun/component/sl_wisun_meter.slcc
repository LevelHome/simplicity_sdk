id: "sl_wisun_meter"
label: "Wi-SUN Meter"
package: "wisun"
description: >
  This component contains the common source of Wi-SUN Meter applications.
  For Wi-SUN - SoC CoAP Meter, alongside the common meter sources, the CoAP
  sources are also included.
  The corresponding configuration files are also provided.
category: "Wi-SUN|Wi-SUN Services"
quality: "production"
metadata:
  sbom:
    license: Zlib
root_path: "app/wisun/component/meter_collector_common"
provides:
  - name: sl_wisun_meter

source:
  - path: "sl_wisun_coap_meter.c"
    condition:
      - "sl_wisun_coap"
  - path: "sl_wisun_meter.c"
    unless:
      - "sl_wisun_coap"
  - path: "sli_wisun_meter_collector.c"

include:
  - path: "."
    file_list:
    - path: "sl_wisun_coap_meter.h"
      condition:
      - "sl_wisun_coap"
    - path: "sl_wisun_meter.h"
      unless:
      - "sl_wisun_coap"
    - path: "sli_wisun_meter_collector.h"

config_file:
  - path: "config/sl_wisun_meter_collector_config.h"

requires:
  - name: "sl_mempool"
  - name: "sl_wisun_app_core"
  - name: "sl_wisun_rht_measurement"
    condition:
      - "hardware_board_has_tempsensor"
  - name: "sl_wisun_led_driver"
    condition:
      - "sl_wisun_coap"

ui_hints:
  visibility: never

#-------------- Template Contribution ----------------
template_contribution:
  - name: "event_handler"
    value:
      event: "internal_app_init"
      include: "sl_wisun_coap_meter.h"
      handler: "sl_wisun_coap_meter_init"
    condition:
      - "sl_wisun_coap"

  - name: "event_handler"
    value:
      event: "internal_app_init"
      include: "sl_wisun_meter.h"
      handler: "sl_wisun_meter_init"
    unless:
      - "sl_wisun_coap"

#---------------- Component Catalog ------------------
  - name: component_catalog
    value: wisun_meter
