project_name: bt_ncp_esl_ap_micriumos
package: Bluetooth
label: Bluetooth - NCP ESL Access Point Micrium OS
description: >
  Network Co-Processor (NCP) target application with additional features to
  support the Electronic Shelf Label Profile ESL Access Point role.
  Note: Some BLE features unused by the ESL Access Point are removed compared
  to the NCP target application.
category: Bluetooth Examples
quality: experimental

filter:
  - name: "Wireless Technology"
    value: ["Bluetooth"]
  - name: "Device Type"
    value: ["NCP"]
  - name: "Project Difficulty"
    value: ["Advanced"]

component:
  - id: micriumos_kernel
  - id: memory_manager
  - id: ncp
  - id: ncp_sec
  - id: sl_system
  - id: clock_manager
  - id: device_init
  - id: bootloader_interface
  - id: uartdrv_usart
    instance:
      - vcom
  - id: mpu
  - id: bluetooth_feature_nvm
  - id: app_assert
  - id: sl_common

requires:
  - name: bluetooth_stack
  - name: bluetooth_feature_sm
  - name: bluetooth_feature_gap
  - name: bluetooth_feature_gatt
  - name: bluetooth_feature_l2cap
  - name: bluetooth_feature_system
  - name: bluetooth_feature_connection
  - name: bluetooth_feature_accept_list
  - name: bluetooth_feature_gatt_server
  - name: bluetooth_feature_dynamic_gattdb
  - name: bluetooth_feature_legacy_scanner
  - name: bluetooth_feature_advertiser_past
  - name: bluetooth_feature_pawr_advertiser
  - name: bluetooth_feature_extended_scanner
  - name: bluetooth_feature_legacy_advertiser
  - name: bluetooth_feature_extended_advertiser
  - name: bluetooth_feature_periodic_advertiser
  - name: bluetooth_feature_connection_phy_update
  - name: bluetooth_feature_external_bonding_database
  - name: bluetooth_feature_connection_pawr_scheduling
  - name: bluetooth_feature_use_accurate_api_address_types

source:
  - path: main.c
  - path: app.c
  - path: app_micriumos.c

include:
  - path: .
    file_list:
      - path: app.h

readme:
  - path: readme.md

other_file:
  - path: image/readme_img0.png
  - path: image/readme_img1.png
  - path: image/readme_img2.png
  - path: image/readme_img3.png
  - path: image/readme_img4.png
  - path: image/readme_img5.png
  - path: image/readme_img7.png

configuration:
  - name: SL_STACK_SIZE
    value: "2000"
  - name: OS_CFG_TMR_EN
    value: "1"
  - name: OS_CFG_DBG_EN
    value: "0"
  - name: OS_CFG_TS_EN
    value: "0"
  - name: OS_CFG_SCHED_ROUND_ROBIN_EN
    value: "0"
  - name: OS_CFG_STK_SIZE_MIN
    value: "48"
  - name: OS_CFG_Q_EN
    value: "1"
  - name: OS_CFG_MON_EN
    value: "0"
  - name: OS_CFG_STAT_TASK_EN
    value: "0"
  - name: OS_CFG_STAT_TASK_STK_CHK_EN
    value: "0"
  - name: OS_CFG_TASK_PROFILE_EN
    value: "0"
  - name: OS_CFG_TASK_Q_EN
    value: "0"
  - name: SL_NCP_CMD_BUF_SIZE
    value: "288"
  - name: SL_NCP_EVT_BUF_SIZE
    value: "264"
  - name: SL_BT_NCP_TRANSPORT_CONFIG_TX_BUF_SIZE
    value: "528"
  - name: SL_BT_NCP_TRANSPORT_CONFIG_RX_BUF_SIZE
    value: "576"
  - name: SL_NCP_CMD_TIMEOUT_MS
    value: "50"
  - name: SL_BT_CONFIG_MAX_CONNECTIONS
    value: "5"
  - name: SL_BT_CONFIG_USER_L2CAP_COC_CHANNELS
    value: "5"
  - name: SL_BT_CONFIG_MAX_SOFTWARE_TIMERS
    value: "0"
  - name: SL_BT_CONFIG_BUFFER_SIZE
    value: "6144"
  - name: SL_BT_CONFIG_ACCEPT_LIST_SIZE
    value: "63"
  - name: SL_BT_CONFIG_USER_ADVERTISERS
    value: "3"
  - name: SL_BT_CONFIG_MAX_PERIODIC_ADVERTISERS
    value: "2"
  - name: SL_BT_CONFIG_MAX_PAWR_ADVERTISED_DATA_LENGTH_HINT
    value: "74"
  - name: SL_BT_CONFIG_MAX_PAWR_ADVERTISERS
    value: "2"
  - name: SL_CLOCK_MANAGER_LFRCO_PRECISION
    value: "cmuPrecisionHigh"
  - name: SL_CLOCK_MANAGER_LFXO_PRECISION
    value: "50"
    condition:
      - hardware_board_has_lfxo
  - name: SL_CLOCK_MANAGER_LFXO_CTUNE
    value: "37"
    condition:
      - hardware_board_has_lfxo
  - name: SL_BOARD_ENABLE_VCOM
    value: "1"
  - name: SL_UARTDRV_USART_VCOM_TX_BUFFER_SIZE
    value: "2"
  - name: SL_UARTDRV_USART_VCOM_RX_BUFFER_SIZE
    value: "2"
  - name: SL_UARTDRV_USART_VCOM_FLOW_CONTROL_TYPE
    value: uartdrvFlowControlHw
    condition:
      - brd4002a
  - name: SL_UARTDRV_USART_VCOM_FLOW_CONTROL_TYPE
    value: uartdrvFlowControlHw
    condition:
      - brd4001c
  - name: SL_UARTDRV_USART_VCOM_FLOW_CONTROL_TYPE
    value: uartdrvFlowControlHwUart
    unless:
      - brd4002a
      - brd4001c
  - name: SL_PSA_KEY_USER_SLOT_COUNT
    value: "1"
    condition:
      - psa_crypto
  - name: SL_BT_GATTDB_INCLUDE_STATIC_DATABASE
    value: "0"
  - name: SL_BT_GATTDB_ENABLE_GATT_CACHING
    value: "0"
  - name: NVM3_DEFAULT_NVM_SIZE
    value: "32768"
  - name: SL_NCP_EMIT_SYSTEM_ERROR_EVT
    value: "1"

post_build:
  - profile: bt_common
    condition: [device_series_2, bootloader_app_properties]

tag:
  - hardware:rf:band:2400
  - hardware:device:ram:64

ui_hints:
  highlight:
    - path: readme.md
      focus: true
