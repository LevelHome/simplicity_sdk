id: freertos_kernel_cortexm
label: FreeRTOS
package: platform
description: >
  FreeRTOS kernel
category: RTOS|FreeRTOS
quality: production
metadata:
  sbom:
    license: MSLA
source:
  - path: util/third_party/freertos/cmsis/Source/cmsis_os2.c
  - path: util/third_party/freertos/kernel/portable/IAR/ARM_CM0/port.c
    condition:
      - toolchain_iar
      - cortexm0plus
  - path: util/third_party/freertos/kernel/portable/IAR/ARM_CM0/portasm.s
    condition:
      - toolchain_iar
      - cortexm0plus
  - path: util/third_party/freertos/kernel/portable/IAR/ARM_CM3/port.c
    condition:
      - toolchain_iar
      - cortexm3
  - path: util/third_party/freertos/kernel/portable/IAR/ARM_CM3/portasm.s
    condition:
      - toolchain_iar
      - cortexm3
  - path: util/third_party/freertos/kernel/portable/IAR/ARM_CM4F/port.c
    condition:
      - toolchain_iar
      - cortexm4
  - path: util/third_party/freertos/kernel/portable/IAR/ARM_CM4F/portasm.s
    condition:
      - toolchain_iar
      - cortexm4
  - path: util/third_party/freertos/kernel/portable/IAR/ARM_CM33_NTZ/non_secure/port.c
    condition:
      - toolchain_iar
      - cortexm33
  - path: util/third_party/freertos/kernel/portable/IAR/ARM_CM33_NTZ/non_secure/portasm.s
    condition:
      - toolchain_iar
      - cortexm33
  - path: util/third_party/freertos/kernel/portable/IAR/ARM_CM33_NTZ/non_secure/port.c
    condition:
      - toolchain_iar
      - cortexm55
  - path: util/third_party/freertos/kernel/portable/IAR/ARM_CM33_NTZ/non_secure/portasm.s
    condition:
      - toolchain_iar
      - cortexm55
  - path: util/third_party/freertos/kernel/portable/GCC/ARM_CM0/port.c
    condition:
      - toolchain_gcc
      - cortexm0plus
  - path: util/third_party/freertos/kernel/portable/GCC/ARM_CM3/port.c
    condition:
      - toolchain_gcc
      - cortexm3
  - path: util/third_party/freertos/kernel/portable/GCC/ARM_CM4F/port.c
    condition:
      - toolchain_gcc
      - cortexm4
  - path: util/third_party/freertos/kernel/portable/GCC/ARM_CM33_NTZ/non_secure/port.c
    condition:
      - toolchain_gcc
      - cortexm33
  - path: util/third_party/freertos/kernel/portable/GCC/ARM_CM33_NTZ/non_secure/portasm.c
    condition:
      - toolchain_gcc
      - cortexm33
  - path: util/third_party/freertos/kernel/portable/GCC/ARM_CM33_NTZ/non_secure/port.c
    condition:
      - toolchain_gcc
      - cortexm55
  - path: util/third_party/freertos/kernel/portable/GCC/ARM_CM33_NTZ/non_secure/portasm.c
    condition:
      - toolchain_gcc
      - cortexm55
include:
  - path: util/third_party/freertos/cmsis/Include
    file_list:
      - path: freertos_os2.h
      - path: freertos_mpool.h
  - path: util/third_party/freertos/kernel/portable/IAR/ARM_CM0
    file_list:
      - path: portmacro.h
    condition:
      - toolchain_iar
      - cortexm0plus
  - path: util/third_party/freertos/kernel/portable/GCC/ARM_CM0
    file_list:
      - path: portmacro.h
    condition:
      - toolchain_gcc
      - cortexm0plus
  - path: util/third_party/freertos/kernel/portable/RVDS/ARM_CM0
    file_list:
      - path: portmacro.h
    condition:
      - toolchain_arm
      - cortexm0plus
  - path: util/third_party/freertos/kernel/portable/IAR/ARM_CM3
    file_list:
      - path: portmacro.h
    condition:
      - toolchain_iar
      - cortexm3
  - path: util/third_party/freertos/kernel/portable/GCC/ARM_CM3
    file_list:
      - path: portmacro.h
    condition:
      - toolchain_gcc
      - cortexm3
  - path: util/third_party/freertos/kernel/portable/RVDS/ARM_CM3
    file_list:
      - path: portmacro.h
    condition:
      - toolchain_arm
      - cortexm3
  - path: util/third_party/freertos/kernel/portable/IAR/ARM_CM4F
    file_list:
      - path: portmacro.h
    condition:
      - toolchain_iar
      - cortexm4
  - path: util/third_party/freertos/kernel/portable/GCC/ARM_CM4F
    file_list:
      - path: portmacro.h
    condition:
      - toolchain_gcc
      - cortexm4
  - path: util/third_party/freertos/kernel/portable/RVDS/ARM_CM4F
    file_list:
      - path: portmacro.h
    condition:
      - toolchain_arm
      - cortexm4
  - path: util/third_party/freertos/kernel/portable/IAR/ARM_CM33_NTZ/non_secure
    file_list:
      - path: portmacro.h
      - path: portasm.h
    condition:
      - toolchain_iar
      - cortexm33
  - path: util/third_party/freertos/kernel/portable/GCC/ARM_CM33_NTZ/non_secure
    file_list:
      - path: portmacro.h
      - path: portasm.h
    condition:
      - toolchain_gcc
      - cortexm33
  - path: util/third_party/freertos/kernel/portable/IAR/ARM_CM33_NTZ/non_secure
    file_list:
      - path: portmacro.h
      - path: portasm.h
    condition:
      - toolchain_iar
      - cortexm55
  - path: util/third_party/freertos/kernel/portable/GCC/ARM_CM33_NTZ/non_secure
    file_list:
      - path: portmacro.h
      - path: portasm.h
    condition:
      - toolchain_gcc
      - cortexm55
provides:
  - name: freertos_arch
    condition: [device_cortexm]
requires:
  - name: freertos
  - name: device_cortexm
  - name: cmsis_core
  - name: cmsis_common
  - name: cmsis_rtos2_headers
  - name: cmsis_rtos2_tick
  - name: cmsis_rtos2_init
  - name: freertos_heap
  - name: sleeptimer
    condition: [power_manager]
  - name: component_catalog
    condition: [power_manager]
recommends:
  - id: freertos_heap_3
  - id: device_init
  - id: device_init_nvic
validation_helper:
  - path: util/third_party/freertos/script/freertos_validation.lua
template_contribution:
  - name: component_catalog
    value: freertos_kernel
  - name: component_catalog
    value: kernel
  - name: rte_components
    value: RTE_RTOS_FreeRTOS_CORE
    priority: -9000
  - name: rte_components
    value: RTE_RTOS_FreeRTOS_CONFIG_RTOS2
  - name: rte_components
    value: RTE_RTOS_FreeRTOS_COROUTINE
  - name: rte_components
    value: RTE_RTOS_FreeRTOS_EVENTGROUPS
  - name: rte_components
    value: RTE_RTOS_FreeRTOS_TIMERS

