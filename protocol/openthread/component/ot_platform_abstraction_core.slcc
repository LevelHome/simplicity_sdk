id: ot_platform_abstraction_core
label: Platform Abstraction (Core)
package: OpenThread
category: OpenThread
quality: production
description: This component provides the abstraction layer between the OpenThread stack and Silicon Labs platform
provides:
  - name: ot_platform_abstraction_core
  # NOTE: The 'wireless_stack' provide was moved here from 'ot_stack_source' to support building modules using the ot-efr32 GitHub repo
  - name: wireless_stack
    allow_multiple: true
requires:
  - name: code_classification
  - name: cpp_support
  - name: sl_system
  - name: sli_protocol_crypto
    condition: [device_series_2]
  - name: sli_crypto
    condition: [device_series_3]
  - name: device_init
  - name: component_catalog
  - name: rail_lib
  - name: rail_util_pa
  - name: rail_util_rssi
  - name: rail_util_built_in_phys
  - name: emlib_msc
    condition: [device_series_2]
  - name: emlib_rmu
    condition: [device_series_2]
  - name: hal_emu
    condition: [device_series_3]
  - name: sleeptimer
  - name: mpu
    condition: [device_series_2]
  - name: nvm3_default
    condition: [ot_stack_full]
  - name: nvm3_default
    condition: [ot_ncp_cpc]
  - name: memory_manager
  - name: silabs_core_circular_queue
  - name: toolchain_gcc
  - name: device_supports_thread
  - name: ot_rtos_wrappers
    condition: [kernel]
  - name: ot_platform_abstraction_implementation
  - name: ot_headers
  - name: ot_sbom_openthread
  - name: ot_sbom_tcplp
  - name: cmsis_rtos2
    condition: [device_series_3]
  - name: ot_uart_implemention
  - name: radio_priority_15_4
recommends:
  - id: ot_platform_abstraction_source
  - id: freertos
    condition: [device_series_3]
  - id: freertos_heap_3
    condition: [device_series_3]
  - id: ot_uart
ui_hints:
  visibility: never
include:
  - path: protocol/openthread/platform-abstraction/efr32
    file_list:
      - path: alarm.h
      - path: board_config.h
      - path: openthread-core-efr32-config.h
      - path: openthread-core-efr32-config-check.h
      - path: platform-efr32.h
      - path: sleep.h
        condition:
          - power_manager
      - path: uart.h
source:
      - path: protocol/openthread/platform-abstraction/efr32/sleep.c
        condition:
          - power_manager
define:
  - name: OPENTHREAD_PROJECT_CORE_CONFIG_FILE
    value: "\"openthread-core-efr32-config.h\""
  - name: OPENTHREAD_CORE_CONFIG_PLATFORM_CHECK_FILE
    value: "\"openthread-core-efr32-config-check.h\""
  - name: SL_CODE_COMPONENT_OT_PLATFORM_ABSTRACTION
    value: ot_platform_abstraction
validation_helper:
  - path: protocol/openthread/component/script/ot_circular_queue_max_size_validation.lua
template_file:
  - path: protocol/openthread/src/template/sl_ot_init.c.jinja
  - path: protocol/openthread/include/template/sl_ot_init.h.jinja
template_contribution:
  - name: power_manager_handler
    value:
      event: is_ok_to_sleep
      include: sleep.h
      handler: sl_ot_is_ok_to_sleep
    condition:
      - power_manager
    unless:
      - kernel
  - name: power_manager_handler
    value:
      event: sleep_on_isr_exit
      include: sleep.h
      handler: sl_ot_sleep_on_isr_exit
    condition:
      - power_manager
    unless:
      - kernel
  - name: event_handler
    value:
      event: stack_init
      include: platform-efr32.h
      handler: sl_ot_sys_init
    priority: -10
  - name: event_handler
    value:
      event: internal_app_init
      include: sl_ot_init.h
      handler: sl_ot_init
    unless:
      - kernel
  - name: ot_init
    value: sl_ot_sleep_init
    priority: 10
    condition:
      - power_manager
  - name: code_classification_components
    value: ot_platform_abstraction
metadata:
  sbom:
    license: BSD-3-Clause
